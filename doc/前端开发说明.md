# 前端开发说明

## 开发模式（热重载）

修改代码后自动刷新浏览器，无需手动构建。

### 启动

```bash
# 启动 Orchestrator UI 后端（提供 /api 与日志）
cd /home/zxh/ainovel_v3
./dev-start.sh
```

访问 `http://127.0.0.1:8766`。

如需前端热重载（可选）：

```bash
cd /home/zxh/ainovel_v3/orchestrator/ui/frontend
npm run dev
```

访问 `http://localhost:5173`（/api 代理到 `http://localhost:8766`）。

### 停止

```bash
./dev-stop.sh
```

或在启动脚本中按 `Ctrl+C`。

### 查看日志

```bash
# Orchestrator UI 日志
tail -f /tmp/orchestrator-dev/orchestrator.log
```

## 生产模式

需要手动构建。

### 构建

```bash
cd /home/zxh/ainovel_v3/orchestrator/ui/frontend
npm run build
```

### 启动

```bash
cd /home/zxh/ainovel_v3
python orchestrator.py --ui --ui-host 127.0.0.1 --ui-port 8766
```

访问 `http://127.0.0.1:8766`。

## 端口说明

- 开发模式前端: `http://localhost:5173` (热重载，可选)
- Orchestrator UI/API: `http://127.0.0.1:8766`
- 生产模式: `http://127.0.0.1:8766`

## 故障排查

### 端口被占用

```bash
# 查看占用端口的进程
lsof -i :8766
lsof -i :5173

# 停止所有相关进程
./dev-stop.sh
```

### 依赖问题

```bash
cd orchestrator/ui/frontend
rm -rf node_modules package-lock.json
npm install
```
