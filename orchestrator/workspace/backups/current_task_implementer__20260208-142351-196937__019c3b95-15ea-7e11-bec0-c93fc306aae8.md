# Current Task (Iteration 2)
assigned_agent: IMPLEMENTER
self_test: enabled

## 背景
上一轮你已修复：保存链路参数完整性、stale root上下文清理、state extract实体回退、空摘要校验。这些修复已通过测试。

## 本轮需要修复的剩余问题

### 问题1：提示词未显示实际使用的提示词
- 雪花流程中的提示词编辑/显示区域没有从数据库加载真实存储的提示词
- 需要调用后端 GET /roots/{id}/snowflake/prompts 获取真实提示词并显示
- 相关文件：SnowflakeView.vue、stores/snowflake.ts、api/snowflake.ts

### 问题2：标签页切换出错
- 各页面/标签页之间切换时出现报错、白屏或状态丢失
- 需要检查路由切换、组件生命周期、store状态管理
- 相关文件：router/index.ts、各View组件、App.vue

### 问题3：设置页LLM配置不显示真实数据库配置
- SettingsView中的LLM配置项显示的不是数据库中实际存储的配置
- 需要从后端API加载真实LLM配置并显示
- 相关文件：views/SettingsView.vue、api/llm.ts

### 问题4：项目管理不完善，无法新建项目
- HomeView中的项目管理功能缺失或不完整
- 需要实现新建项目功能（调用后端创建root API）
- 相关文件：views/HomeView.vue、stores/project.ts、api/project.ts

### 问题5：雪花步骤生成内容只显示名字列表
- 角色、场景、幕、章、锚点等生成内容只能看到名字/标题列表
- 需要显示完整的原始信息和解析结果（所有字段）
- 相关文件：Step3Panel.vue(角色)、Step4Panel.vue(场景)、Step5Panel.vue(幕章)、Step6Panel.vue(锚点)、CharacterCard.vue、SceneCard.vue、ActCard.vue、ChapterCard.vue

### 问题6：推演功能完整性
- 确认推演（simulation）功能可正常触发和显示结果
- 相关文件：SimulationView.vue、stores/simulation.ts

## 调研要求
- 先阅读每个相关文件的代码，确认问题是否真实存在
- 对照 doc/frontend_implementation_spec.md 检查实现差距
- 检查后端API是否存在对应端点

## 验收标准
- 提示词区域显示从数据库加载的真实提示词
- 所有页面标签页切换正常
- 设置页LLM配置显示真实数据库配置
- 项目管理页面支持新建项目
- 雪花步骤生成的角色等内容显示完整信息（所有字段）
- 推演功能可正常触发
- 前端单元测试全部通过

## 约束
- 不改变后端API接口
- 保持现有代码风格
- 优先修复影响核心功能的问题

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

