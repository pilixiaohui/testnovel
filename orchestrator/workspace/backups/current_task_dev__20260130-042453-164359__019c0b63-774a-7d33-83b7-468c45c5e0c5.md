# Current Task (Iteration 4)
assigned_agent: DEV
self_test: enabled

## 任务目标
为后端SceneNode模型添加title和sequence_index字段，使其与前端类型定义一致

## 背景
- TEST已创建契约测试：`project/backend/tests/unit/test_scene_node_contract.py`
- 当前红灯原因：SceneNode.model_fields中缺少title、sequence_index
- 前端类型已包含这两个字段（测试通过）

## 实现要求
1. 在`project/backend/app/models.py`的SceneNode类中添加：
   - `title: str = Field(..., min_length=1)` - 场景标题，非空字符串
   - `sequence_index: int = Field(..., ge=0)` - 序列索引，非负整数
2. 确保Step4端点返回的SceneNode包含这两个字段
3. 如果SceneNode从SceneOrigin映射，需要在映射逻辑中填充title（可从expected_outcome或其他字段派生）

## 被修改代码
- `project/backend/app/models.py` - SceneNode模型定义
- 可能涉及：`project/backend/app/main.py` Step4端点的返回逻辑

## 验收标准
1. `cd project/backend && MEMGRAPH_HOST=localhost MEMGRAPH_PORT=7687 python -m pytest tests/unit/test_scene_node_contract.py -v` → 4个测试全部PASS
2. SceneNode实例化时title为空字符串应触发ValidationError
3. SceneNode实例化时sequence_index为负数应触发ValidationError

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

