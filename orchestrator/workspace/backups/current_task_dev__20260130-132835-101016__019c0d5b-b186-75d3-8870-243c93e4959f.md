# Current Task (Iteration 2)
assigned_agent: DEV
self_test: enabled

## 任务目标
修复章节渲染API的字数约束问题（M2-T2）

## 问题描述（来自REVIEW报告）
`project/backend/app/main.py:589` 的章节渲染端点存在以下问题：
1. 未对 `rendered_content` 长度做服务端校验
2. 字数不在1800-2200范围时未返回400快速失败
3. 不达标内容仍会被持久化到Memgraph

## 修复要求
1. 在 `project/backend/app/main.py` 的章节渲染端点增加字数校验：
   - `len(content) < 1800` → HTTP 400，错误信息明确说明字数不足
   - `len(content) > 2200` → HTTP 400，错误信息明确说明字数超限
2. 字数不达标时**禁止持久化**（不调用 `storage.update_chapter`）
3. 补充测试用例到 `project/backend/tests/integration/test_chapter_render_api.py`：
   - 测试字数=1799时返回400
   - 测试字数=1800时返回200（边界）
   - 测试字数=2200时返回200（边界）
   - 测试字数=2201时返回400
   - 测试字数不达标时rendered_content未被持久化

## 验收标准
1. `cd project/backend && python -m pytest tests/integration/test_chapter_render_api.py -v` → 全部PASS
2. `cd project/backend && python -m pytest tests/integration/test_chapter_persistence.py -v` → 全部PASS

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
