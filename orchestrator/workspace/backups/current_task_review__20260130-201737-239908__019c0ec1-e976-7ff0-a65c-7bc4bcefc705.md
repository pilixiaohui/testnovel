# Current Task (Iteration 21)
assigned_agent: REVIEW
review_mode: single

## 任务目标
调查用户反馈的前端问题和测试有效性问题

## 调查范围

### 1. 前端Vite代理错误
用户报告错误：
```
Cannot read properties of null (reading 'split')
at required (vite/dist/node/chunks/dep-NjL7WTE1.js:59660:23)
at common.setupOutgoing
```
- 检查 `project/frontend/vite.config.ts` 中的proxy配置
- 确认后端API地址配置是否正确
- 验证代理目标是否可达

### 2. 测试数据持久化验证
- 检查 `test_ten_chapter_e2e.py` 和 `test_review_e2e.py` 是否真正写入Memgraph
- 验证测试是否使用mock/stub绕过了真实存储
- 确认测试后数据是否可通过API查询

### 3. Playwright测试有效性
- 检查 `project/frontend/tests/fe_chapter_review.spec.ts`
- 确认测试是否连接真实后端还是mock
- 验证测试场景是否覆盖完整E2E流程

### 4. 数据流完整性
- 从Step1到10章生成的数据是否持久化
- rendered_content和review_status是否正确存储
- 前端能否通过API获取这些数据

## 代码审查要求

### 需审查文件
- `project/frontend/vite.config.ts` - 代理配置
- `project/backend/tests/integration/test_ten_chapter_e2e.py` - E2E测试实现
- `project/backend/tests/integration/test_review_e2e.py` - 审核E2E测试
- `project/frontend/tests/fe_chapter_review.spec.ts` - 前端测试
- `project/backend/app/storage/memgraph_storage.py` - 存储层

### 审查重点
1. 测试是否使用真实数据库连接
2. 测试数据是否在测试后被清理（导致前端看不到）
3. 前端API调用路径是否与后端路由匹配
4. Vite代理配置是否正确指向后端服务

## 验收标准
1. 明确Vite代理错误的根因
2. 确认测试数据是否持久化到Memgraph
3. 判断playwright测试是否为有效E2E测试
4. 给出修复建议

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 前端: /home/zxh/ainovel_v3/project/frontend
