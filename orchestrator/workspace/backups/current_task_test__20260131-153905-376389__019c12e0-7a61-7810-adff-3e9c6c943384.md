# Current Task (Iteration 9)
assigned_agent: TEST
work_mode: design

## 任务目标
按P0/P1/P2优先级补全前端E2E测试代码，建立红灯基线。参考doc/e2e_test_evaluation_report.md:259的分析结果。

## 测试范围（按优先级）

### P0（必须）
1. **图信息提取/提交闭环**
   - 测试stateExtract API调用与变更预览展示
   - 测试stateCommit提交后World刷新
   - 测试失败场景与重试机制
   - 文件位置：新建 `project/frontend/tests/e2e/state-extract.spec.ts`

2. **章节正文生成**
   - 测试POST /chapters/{id}/render调用
   - 测试渲染结果展示
   - 测试失败与重试
   - 文件位置：新建 `project/frontend/tests/e2e/chapter-render.spec.ts`

### P1
3. **Step6跳转Editor**
   - 测试雪花Step6完成后跳转EditorView
   - 测试root_id/branch_id正确传递
   - 扩展现有 `project/frontend/tests/e2e/snowflake.spec.ts`

### P2
4. **分支/提交/快照UI**
   - 测试分支列表展示与切换
   - 测试提交历史查看
   - 测试快照创建与恢复
   - 文件位置：新建 `project/frontend/tests/e2e/version-control.spec.ts`

5. **章节审核流程**
   - 测试审核按钮点击与状态更新
   - 扩展现有 `project/frontend/tests/e2e/core.e2e.spec.ts`

## 验收标准
1. 新增E2E测试文件符合Playwright规范
2. 测试用例覆盖happy path + 失败路径
3. `npm run test:e2e` 执行测试（预期红灯/部分失败，因实现未补齐）
4. 测试代码引用正确的API端点和DOM选择器

## 参考文档
- 功能点分析：doc/e2e_test_evaluation_report.md:259
- API规格：doc/frontend_implementation_spec.md:457,574,575
- 现有E2E：project/frontend/tests/e2e/

## 执行环境
- frontend_root: /home/zxh/ainovel_v3/project/frontend
- 测试命令: npm run test:e2e
- Playwright配置: playwright.config.ts
