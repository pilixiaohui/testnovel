# Current Task (Iteration 3)
assigned_agent: TEST
work_mode: design

## 任务目标
为SceneNode前后端契约一致性编写测试，确保后端Step4返回的字段能被前端正确解析和展示

## 背景
- architecture审阅发现：前端SceneNode期望title/sequence_index，后端返回expected_outcome/conflict_type
- 前端SnowflakeView.vue:60直接渲染scene.title，但后端不提供该字段
- 需要先写测试定义期望契约，再修复实现

## 测试需求
1. 后端Step4返回的SceneNode必须包含title字段（字符串，非空）
2. 后端Step4返回的SceneNode必须包含sequence_index字段（整数，>=0）
3. 前端类型定义与后端响应结构一致

## 被测代码
- 后端：`project/backend/app/main.py` Step4端点
- 后端模型：`project/backend/app/models.py` SceneNode/SceneOrigin
- 前端类型：`project/frontend/src/types/snowflake.ts` SceneNode接口

## 验收标准
1. `cd project/backend && python -m pytest tests/unit/test_scene_node_contract.py -v` → 测试文件存在，测试可运行，当前红灯（因后端未返回title）
2. 测试覆盖：title字段存在性、sequence_index字段存在性、字段类型校验

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

