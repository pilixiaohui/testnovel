# Current Task (Iteration 8)
assigned_agent: REVIEW
review_mode: single

## 任务目标
验收M3-T1章节审核API实现

## 验收范围

### M3-T1: 章节审核API
- 验收命令: `cd project/backend && python -m pytest tests/integration/test_chapter_review_api.py -v`
- 预期: 5 passed
- 实现文件: `project/backend/app/main.py`（约656行新增review端点）
- 模型文件: `project/backend/app/models.py`（约161行新增ChapterReviewPayload）
- 测试文件: `project/backend/tests/integration/test_chapter_review_api.py`

## 代码审查要求（必做）

### 1. 实现代码质量检查
- 接口路径是否符合RESTful规范：`POST /api/v1/chapters/{chapter_id}/review`
- 请求体校验是否正确：`status: str` + 手动校验返回400（非Pydantic 422）
- 错误处理是否完整：
  - 章节不存在 → 404
  - 无效status → 400
- review_status是否正确持久化到Memgraph
- 响应格式是否符合设计：`{"id": chapter_id, "review_status": "<approved|rejected>"}`

### 2. 测试代码合理性检查
- 测试用例是否覆盖所有场景：
  - approved成功 + 持久化验证
  - rejected成功 + 持久化验证
  - 无效status → 400
  - 章节不存在 → 404
  - 幂等性测试
- 测试断言是否正确反映预期行为
- 是否存在作弊测试（mock过度、硬编码预期值等）

### 3. 作弊代码检测
- 实现是否真正调用存储层持久化
- 是否存在仅为通过测试的条件判断
- 状态校验逻辑是否健壮

## 验收标准
1. `cd project/backend && python -m pytest tests/integration/test_chapter_review_api.py -v` → 5 passed
2. 实现代码质量审查通过
3. 测试代码合理性审查通过
4. 无作弊代码或架构问题

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- Memgraph: localhost:7687
