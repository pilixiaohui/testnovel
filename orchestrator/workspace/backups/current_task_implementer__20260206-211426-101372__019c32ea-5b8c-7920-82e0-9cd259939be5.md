# Current Task (Iteration 1)
assigned_agent: IMPLEMENTER
self_test: enabled

## 任务目标
通过前端浏览器界面模拟真实用户的完整小说创作流程。以"名为何方的异世界穿越者穿越到赛博朋克世界的冒险爽文故事"为主题，完成 Snowflake 六步法全流程（Step1~Step6）、推演（Simulation）、章节渲染（Chapter Render），最终产出约10章、每章约2000字的短篇小说。

## 需求边界
- 输入：故事创意"名为何方的异世界穿越者穿越到赛博朋克世界的冒险爽文故事"，目标10章，每章约2000字
- 输出：完整的小说内容（所有章节已渲染）
- 行为：
  1. 启动后端服务和前端开发服务器
  2. 通过浏览器访问前端页面
  3. 创建新项目
  4. Step1：输入故事创意，生成 logline 候选列表，选择一个 logline
  5. Step2：基于 logline 生成故事结构（SnowflakeRoot：theme/ending/three_disasters）
  6. Step3：生成角色小传（CharacterSheet 列表）
  7. Step4：生成场景骨架（SceneNode 列表）
  8. Step5：生成幕结构（Acts）和章节结构（Chapters），目标约10章
  9. Step6：生成故事锚点（StoryAnchors）
  10. 每步完成后 commit 进度
  11. 进入推演流程：对每个场景执行推演（simulation round）
  12. 章节渲染：对每个章节执行 render，生成约2000字内容
  13. 验证所有章节内容已生成

## 测试场景
1. 正常场景：完整走通 Step1~Step6 + 推演 + 渲染，所有章节产出内容
2. 超时处理：TopOne API 响应慢，需确保前端/后端超时配置足够（至少10分钟）
3. 步骤衔接：每步的输出正确传递给下一步作为输入

## 验收标准（抽象描述）
- Snowflake Step1~Step6 全部完成，每步数据正确生成
- 推演流程对场景执行完毕
- 所有章节（约10章）渲染完成，每章有实际文本内容
- 整个流程通过前端界面操作完成（浏览器自动化），模拟真实用户行为
- 无跳过步骤，流程真实可靠

## 约束条件
- TopOne API 超时时间必须设置至少10分钟（600秒），包括前端 axios timeout 和后端 httpx/aiohttp timeout
- 必须通过前端浏览器界面操作，不能直接调用后端 API 绕过前端
- 如果前端 axios 默认超时不足，需要修改配置以支持长时间 LLM 请求
- 参考文档：orchestrator/memory/uploaded_docs/requirements/frontend_implementation_spec.md 和 orchestrator/memory/uploaded_docs/requirements/系统架构与技术规格.md
- 后端服务端口和前端开发端口参考 project_env.json（frontend_dev_port: 5185）
- 使用 Playwright 浏览器工具进行前端操作

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

