# Current Task (Iteration 6)
assigned_agent: DEV
self_test: enabled

## 任务目标
修复前端EditorView的renderScene调用，使其传递完整的SceneRenderPayload必填字段

## 背景
- TEST已创建契约测试：`project/backend/tests/unit/test_render_contract.py`
- 当前红灯原因：EditorView中缺少voice_dna/conflict_type/outline_requirement/user_intent/expected_outcome字段
- 后端SceneRenderPayload要求这5个字段必填（min_length=1）
- 当前前端代码：`renderScene(context.id, branchId, {})` 传空对象

## 实现要求
1. 在`project/frontend/src/views/EditorView.vue`中修改renderScene调用
2. 从当前场景上下文(context)中提取或构造必填字段：
   - voice_dna: 可从场景或角色设定中获取，或使用合理默认值
   - conflict_type: 从场景的conflict_type字段获取
   - outline_requirement: 从场景的outline或summary获取
   - user_intent: 可使用场景的expected_outcome或用户输入
   - expected_outcome: 从场景的expected_outcome字段获取
3. 如果场景上下文中没有这些字段，需要从store或API获取
4. 确保传递的字段值非空（满足min_length=1约束）

## 被修改代码
- `project/frontend/src/views/EditorView.vue:134` - renderScene调用处
- 可能涉及：`project/frontend/src/api/scene.ts` - renderScene函数签名
- 可能涉及：`project/frontend/src/types/scene.ts` - 类型定义

## 验收标准
1. `cd project/backend && MEMGRAPH_HOST=localhost MEMGRAPH_PORT=7687 python -m pytest tests/unit/test_render_contract.py -v` → 4个测试全部PASS
2. 前端EditorView的renderScene调用包含所有5个必填字段
3. 字段值非空，满足后端校验要求

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

