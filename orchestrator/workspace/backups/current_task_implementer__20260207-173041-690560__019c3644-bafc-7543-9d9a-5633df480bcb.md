# Current Task (Iteration 6)
assigned_agent: IMPLEMENTER
self_test: enabled
resume: true

## SYNTHESIZER 第二次 REWORK 原因
REQUIREMENT_VALIDATOR报告4项需求未满足或缺乏验证证据：

### 必须修复/验证的4项需求

#### 需求2: 提示词编辑器显示当前实际使用的提示词
**问题**: 验证器未能确认提示词编辑器显示了从后端加载的实际提示词
**要求**: 
- 确保SnowflakeView中提示词编辑区域在页面加载时调用GET /roots/{id}/snowflake/prompts
- 确保返回的提示词内容显示在编辑器中（非空白、非硬编码默认值）
- 用Playwright MCP验证：打开雪花页面→检查提示词区域有内容→检查网络请求确认调用了prompts API

#### 需求3: 各标签页/视图切换正常无报错
**问题**: 验证器未能确认标签页切换稳定性
**要求**:
- 确保路由切换时各View组件不报错（检查onMounted/onUnmounted生命周期）
- 用Playwright MCP验证：依次切换首页→雪花→推演→编辑器→世界观→设置→首页，每次切换后检查console无error

#### 需求5: 设置页面LLM配置显示数据库真实配置
**问题**: 验证器未能确认设置页显示了真实数据库配置
**要求**:
- 确保SettingsView在加载时调用GET /api/v1/settings/llm
- 确保返回的配置数据显示在页面表单中
- 用Playwright MCP验证：打开设置页→检查LLM配置区域有数据→检查网络请求确认调用了settings API并返回200

#### 需求7: 雪花步骤生成内容显示完整信息
**问题**: 验证器未能确认雪花步骤显示了完整字段信息
**要求**:
- 确保Step3(角色)显示name/ambition/conflict/epiphany/voice_dna等所有字段
- 确保Step4(场景)显示title/expected_outcome/conflict_type等
- 确保Step5(幕章)显示title/purpose/tone/focus等
- 确保Step6(锚点)显示anchor_type/description/constraint_type/required_conditions等
- 用Playwright MCP验证：进入有数据的雪花页面→切换到各步骤→检查页面中包含完整字段内容（不仅仅是名字列表）

## 关键要求
1. 每项需求必须有Playwright MCP的明确黑盒验证证据（截图/snapshot/网络请求）
2. 如果功能已实现但验证器未检测到，检查是否是DOM结构/data-test属性问题导致验证器无法定位
3. 确保所有现有单元测试继续通过
4. 报告中必须为每项需求提供：输入→执行→输出的完整证据链

## 约束
- 前端项目路径：/home/zxh/ainovel_v3/project/frontend
- 前端开发端口：5185
- 不要破坏已有功能
- 优先确保功能可用，其次提供可验证证据

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

