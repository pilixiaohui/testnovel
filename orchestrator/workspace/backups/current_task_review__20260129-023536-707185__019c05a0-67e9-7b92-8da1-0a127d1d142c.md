# Current Task (Iteration 6)
assigned_agent: REVIEW
review_mode: milestone

## 任务目标
验收 M1: 前端契约对齐 里程碑的全部 4 个任务。

## 验收范围

### M1-T1: 重构前端 API 层
- 验收标准: `ls project/frontend/src/api/*.ts | wc -l` >= 13; 每个模块导出规范命名的 `*Api` 对象
- 预期: 13 个 API 模块文件，snowflakeApi/anchorApi/agentApi/dmApi/simulationApi/sceneApi/entityApi/subplotApi/branchApi/commitApi/llmApi/feedbackApi 全部存在

### M1-T2: 补齐前端类型定义
- 验收标准: 类型与规格 2.1-2.3 一致
- 预期: SnowflakeRoot, CharacterSheet, SceneNode, Act, Chapter, Desire, Intention, AgentAction, CharacterAgentState, ActionResult, DMArbitration, ConvergenceCheck, SimulationRoundResult, ReplanResult, EntityView, EntityRelationView, StoryAnchor, Subplot, SceneView, SceneContextView, WorldSnapshot 等类型存在

### M1-T3: 补齐 stores/types 导出入口
- 验收标准: `src/stores/index.ts` 和 `src/types/index.ts` 存在且导出所有模块
- 预期: 两个 index.ts 文件存在并正确导出

### M1-T4: 补齐 composables/utils/styles
- 验收标准: usePolling.ts, useNotification.ts, format.ts, validation.ts, variables.scss, reset.scss, global.scss 存在
- 预期: 7 个文件全部存在

## 验收标准
必须依次执行以下命令并在报告中汇报每项结果：
1. `ls project/frontend/src/api/*.ts | wc -l` → 应 >= 13
2. `grep -l 'export const.*Api' project/frontend/src/api/*.ts | wc -l` → 应 >= 12
3. `grep -c 'export interface' project/frontend/src/types/snowflake.ts` → 应 >= 5
4. `grep -c 'export interface' project/frontend/src/types/simulation.ts` → 应 >= 10
5. `grep -c 'export interface' project/frontend/src/types/entity.ts` → 应 >= 7
6. `test -f project/frontend/src/types/index.ts && echo 'exists'` → 应输出 exists
7. `test -f project/frontend/src/stores/index.ts && echo 'exists'` → 应输出 exists
8. `ls project/frontend/src/composables/*.ts | wc -l` → 应 >= 2
9. `ls project/frontend/src/utils/*.ts | wc -l` → 应 >= 2
10. `ls project/frontend/src/styles/*.scss | wc -l` → 应 >= 3
11. `cd project/frontend && npm run build` → 构建成功，退出码 0

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

