# Current Task (Iteration 4)
assigned_agent: DEV
self_test: enabled

## 任务目标
创建端到端测试脚本，使用指定提示生成 10 章完整短篇小说，覆盖系统全部核心功能。

## 需求背景
FINISH_REVIEW 指出现有脚本仅覆盖 Step1-4，未涉及 Step5a/5b、锚点、推演、渲染，且未使用用户指定的测试提示。

## 实现要求
1. 创建 `project/scripts/ten_chapter_novel_e2e.py` 脚本
2. 使用提示："名为何方的时空旅人穿越到赛博朋克世界的日常生活故事。"
3. 串行调用完整流程：
   - Step1: 生成 logline 选项
   - Step2: 生成故事结构 (SnowflakeRoot)
   - Step3: 生成角色
   - Step4: 生成场景列表
   - Step5a: 生成幕 (Acts)
   - Step5b: 生成章节 (Chapters)，**确保生成 10 章**
   - Step6: 生成锚点 (Anchors)
4. 断言验证：
   - 章节数量 == 10
   - 每章有标题和内容
   - 锚点数量 >= 1
5. 输出生成的小说大纲到控制台或文件

## 技术约束
- 使用 httpx 或 requests 调用后端 API
- 后端地址从环境变量 `API_BASE_URL` 读取，默认 `http://localhost:8000/api/v1`
- 脚本应可独立运行：`python project/scripts/ten_chapter_novel_e2e.py`
- 若 LLM 调用需要 API Key，从环境变量读取

## 验收标准
必须依次执行以下命令并在报告中汇报每项结果：
1. `ls project/scripts/ten_chapter_novel_e2e.py` → 文件存在
2. `grep -c 'chapter' project/scripts/ten_chapter_novel_e2e.py` → 包含章节相关逻辑
3. `grep '何方' project/scripts/ten_chapter_novel_e2e.py` → 包含指定提示文本

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

