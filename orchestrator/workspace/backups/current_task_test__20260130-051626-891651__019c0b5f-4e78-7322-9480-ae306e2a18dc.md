# Current Task (Iteration 12)
assigned_agent: TEST
work_mode: design

## 任务目标
为章节渲染API编写集成测试，验证POST /api/v1/chapters/{chapter_id}/render返回rendered_content且字数符合要求

## 背景
- M2-T1已完成Step5b章节数量约束
- 现在需要实现章节渲染API，将章节大纲渲染为正文
- 每章字数要求：1800-2200字（2000±10%）

## 测试需求
1. POST /api/v1/chapters/{chapter_id}/render 端点存在
2. 成功调用返回200和rendered_content字段
3. rendered_content字数在1800-2200范围内
4. chapter_id不存在时返回404
5. 渲染失败时返回适当错误码

## 被测代码
- 后端端点：`project/backend/app/main.py` - 新增章节渲染端点
- LLM渲染：`project/backend/app/services/llm_engine.py` 或 `smart_renderer.py`
- 存储层：`project/backend/app/storage/memgraph_storage.py` - get_chapter

## 验收标准
1. `cd project/backend && python -m pytest tests/integration/test_chapter_render_api.py -v` → 测试文件存在，测试可运行
2. 测试覆盖：成功渲染返回content、字数范围校验、404处理

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

