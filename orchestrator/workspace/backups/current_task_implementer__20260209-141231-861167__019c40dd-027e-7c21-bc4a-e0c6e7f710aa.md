# Current Task (Iteration 2)
assigned_agent: IMPLEMENTER
self_test: enabled

## 任务目标
继续调研并修复前端剩余问题。上一轮仅修复了 step4 上下文同步，还有大量问题未处理。

## 上轮已完成
- step4 生成新 root/branch 后同步 projectStore 上下文（SnowflakeView.vue:550）

## 本轮需要调研并修复的问题（按优先级排序）

### P0: 项目管理与保存
1. **项目无法保存**：检查 projectStore 的 save/persist 逻辑，确认保存 API 调用是否正确
2. **无法新建项目**：检查 HomeView 的新建项目流程，确认 API 调用和路由跳转
3. **项目管理不完善**：检查项目列表、删除、切换等功能

### P1: 雪花步骤内容显示
4. **雪花步骤内容不完整**：角色(CharacterCard)、场景(SceneCard)、幕(ActCard)、章(ChapterCard)等组件只显示名字列表，需要显示完整字段信息（ambition, conflict, epiphany, voice_dna, expected_outcome, conflict_type, purpose, tone, focus 等）
5. **缺少原始信息和解析结果显示**：需要支持查看 LLM 返回的原始文本和解析后的结构化数据

### P2: 提示词与配置
6. **提示词不显示实际值**：检查提示词编辑器是否从后端 API 获取实际提示词，而非使用硬编码默认值
7. **设置页 LLM 配置不真实**：SettingsView 应从后端获取真实的 LLM 配置（模型名、API key 状态、端点等）

### P3: 标签页与导航
8. **标签页切换出错**：检查路由配置、各 View 的 onMounted/watch 逻辑，确认切换时状态正确初始化/清理

### P4: 图信息提取与推演
9. **无法提取图信息**：检查 StateExtractPanel 和 llmApi.stateExtract 的调用链
10. **无法推演**：检查 SimulationView 和 simulationApi 的调用链

## 调研方法
- 逐一阅读相关组件和 store 代码
- 检查 API 调用是否与后端端点匹配
- 检查数据流：API 响应 → Store 状态 → 组件渲染
- 对每个问题先确认是否属实，再修复

## 验收标准
- 项目可正常创建、保存、加载
- 雪花步骤的角色/场景/幕/章/锚点卡片显示所有字段（不仅仅是名字）
- 提示词编辑器显示从后端获取的实际提示词
- 设置页显示真实 LLM 配置
- 所有标签页切换正常无报错
- 图信息提取和推演功能可正常触发
- 前端构建无报错

## 约束条件
- 先调研确认问题属实再修复
- 遵循现有技术栈和代码风格
- 不改变后端 API 接口（除非发现后端 bug）
- 每个修复都要有对应的单元测试验证
- 使用 `<script setup lang="ts">` 语法

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

