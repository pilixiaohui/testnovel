# Current Task (Iteration 4)
assigned_agent: DEV
self_test: enabled

## 任务目标
为ToponeGateway补齐Snowflake Step5a/Step5b/锚点生成方法

## 实现需求
1. 在`project/backend/app/llm/topone_gateway.py`的ToponeGateway类中添加：
   - `async def generate_act_list(self, root, characters) -> list`：调用LLM生成幕结构
   - `async def generate_chapter_list(self, root, act, characters) -> list`：调用LLM生成章结构
   - `async def generate_story_anchors(self, root, characters, acts) -> list`：调用LLM生成锚点
2. 参考现有方法（如generate_logline_options）的实现模式
3. 提示词需支持用户指定章节数量（prompt_constraint策略）

## 被修改代码
- `project/backend/app/llm/topone_gateway.py:ToponeGateway`

## 验收标准
1. `pytest project/backend/tests/unit/test_snowflake_engine_contract.py::test_topone_gateway_has_generate_act_list -v` → 绿灯
2. `pytest project/backend/tests/unit/test_snowflake_engine_contract.py::test_topone_gateway_has_generate_chapter_list -v` → 绿灯
3. `pytest project/backend/tests/unit/test_snowflake_engine_contract.py::test_topone_gateway_has_generate_story_anchors -v` → 绿灯
4. `pytest project/backend/tests/unit/test_snowflake_engine_contract.py -v` → ToponeGateway相关3个用例全部绿灯

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

