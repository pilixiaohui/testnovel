# Current Task (Iteration 6)
assigned_agent: TEST
work_mode: design

## 任务目标
为 M1-T2（Snowflake Step1-6 全流程接入）编写集成测试，覆盖从 Step1 到 Step6 的端到端业务流与状态推进。

## 测试需求
1. Step1 logline：输入 idea → 调用 step1 API → state.logline 更新。
2. Step2 root：基于 logline 选择 → 调用 step2 API → state.root 更新。
3. Step3 characters：调用 step3 API → state.characters 更新。
4. Step4 scenes：调用 step4 API → state.scenes 更新。
5. Step5 acts/chapters：调用 step5a/step5b API → state.acts 与 state.chapters 更新。
6. Step6 anchors：调用 anchor API → state.anchors 更新。
7. 失败路径：任一步骤 API 失败时不应推进下一步状态（保持前一步状态）。

## 被测代码
- `project/frontend/src/views/SnowflakeFlow.vue`
- `project/frontend/src/stores/snowflake.ts`
- `project/frontend/src/api/snowflake.ts`
- `project/frontend/src/api/anchor.ts`

## 验收标准
- 命令: `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- 阈值: 测试可运行且覆盖上述场景，当前应为红灯（实现前）

## 执行环境
- 工作目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

