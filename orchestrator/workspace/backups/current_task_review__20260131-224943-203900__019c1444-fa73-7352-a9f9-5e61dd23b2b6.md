# Current Task (Iteration 23)
assigned_agent: REVIEW
review_mode: milestone

## 任务目标
验收 Milestone M3: 超时配置统一

## 验收范围
### M3-T1: 调查超时问题根因
- evidence: REVIEW报告确认前端30s硬编码、后端默认30s实际120s、E2E全mock

### M3-T2: 统一超时配置为10分钟
- 验收命令: `grep -n 'timeout' project/frontend/src/api/index.ts` → 应含 600000
- 验收命令: `grep -n 'TOPONE_TIMEOUT_SECONDS' project/backend/app/config.py` → 默认值 600
- 验收命令: `grep 'TOPONE_TIMEOUT_SECONDS' project/backend/.env` → 值为 600

### M3-T3: E2E测试真实接口覆盖
- 验收命令: `cd project/frontend && npx playwright test real-api.spec.ts --list` → 列出测试用例
- 验收命令: `cd project/frontend && npx playwright test real-api.spec.ts` → 无后端时跳过而非失败

## 代码审查要求
1. 实现文件审查:
   - project/frontend/src/api/index.ts - axios超时配置
   - project/backend/app/config.py - TOPONE_TIMEOUT_SECONDS默认值
   - project/backend/.env - 运行时配置

2. 测试文件审查:
   - project/frontend/tests/e2e/real-api.spec.ts - 健康检查逻辑、跳过策略、超时配置

3. 审查重点:
   - 超时值是否统一为600s/600000ms
   - 健康检查逻辑是否合理（6s短超时快速失败）
   - 跳过策略是否正确（无后端时跳过而非失败）
   - 无作弊代码（如硬编码跳过、空断言）

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

