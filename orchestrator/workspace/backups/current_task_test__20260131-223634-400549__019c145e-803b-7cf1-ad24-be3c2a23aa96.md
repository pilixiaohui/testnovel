# Current Task (Iteration 22)
assigned_agent: TEST
work_mode: design

## 任务目标
完善 real-api.spec.ts 真实接口测试，增加后端健康检查与跳过策略

## 背景
Iteration 21 DEV 因规范禁止修改测试代码而阻塞。TEST 代理有权限修改测试代码。

## 具体要求
1. 在 real-api.spec.ts 中增加后端健康检查逻辑（beforeAll 中检测后端是否可用）
2. 若后端不可用，使用 test.skip() 跳过真实接口测试
3. 若后端可用，执行真实接口请求测试
4. 调整等待超时为合理值（考虑 600s 超时配置）

## 验收标准
1. `cd project/frontend && npx playwright test real-api.spec.ts --list` → 列出测试用例
2. 无后端时：测试应跳过而非失败
3. 有后端时：测试应能正常执行

## 测试文件路径
project/frontend/tests/e2e/real-api.spec.ts

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- 前端目录: /home/zxh/ainovel_v3/project/frontend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687
- 测试执行配置:
  - 前端开发端口: 5185
  - 服务启动等待: 6秒
  - unit测试超时: 120秒
  - integration测试超时: 300秒
  - e2e测试超时: 600秒

