# Current Task (Iteration 5)
assigned_agent: TEST
work_mode: design

## 任务目标
为渲染接口契约编写测试，验证前端能成功调用场景渲染API

## 背景
- risk审阅发现：前端EditorView传空payload调用renderScene，但后端SceneRenderPayload要求5个必填字段
- 当前契约冲突导致渲染必失败
- 需要测试定义期望契约：要么前端传完整字段，要么后端提供minimal接口

## 测试需求
1. 后端SceneRenderPayload必填字段校验（voice_dna/conflict_type/outline_requirement/user_intent/expected_outcome）
2. 空payload调用应返回422校验错误
3. 完整payload调用应成功返回rendered content
4. 或：新增minimal render端点接受scene_id自动填充上下文

## 被测代码
- 后端模型：`project/backend/app/models.py` SceneRenderPayload
- 后端端点：`project/backend/app/main.py` render_scene端点
- 前端调用：`project/frontend/src/views/EditorView.vue:134`

## 验收标准
1. `cd project/backend && python -m pytest tests/unit/test_render_contract.py -v` → 测试文件存在，测试可运行
2. 测试覆盖：空payload返回422、完整payload成功、字段缺失返回422

## 执行环境
- 工作目录: /home/zxh/ainovel_v3
- 代码目录: /home/zxh/ainovel_v3/project/backend
- Python: /home/zxh/ainovel_v3/project/backend/.venv/bin/python
- 环境变量:
  - MEMGRAPH_HOST=localhost
  - MEMGRAPH_PORT=7687

