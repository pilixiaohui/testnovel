已阅读开发行为规范
iteration: 22
self_test: enabled

## 任务理解

工单要求实现的功能：
1. 修复 Vite 代理 target 配置（使用完整 URL）
2. 新增并校验 `VITE_API_PROXY_TARGET`
3. 保持 axios `VITE_API_BASE_URL` 用法不变

## 实现方案

### 设计思路
将 API 路径前缀与代理目标地址分离，开发模式强校验代理目标，确保快速失败。

### 改动说明

| 文件 | 修改内容 | 实现逻辑 |
|-----|---------|---------|
| `project/frontend/.env.development:1` | 新增 `VITE_API_PROXY_TARGET` | 明确代理目标完整 URL |
| `project/frontend/vite.config.ts:10` | 读取新变量并在开发模式强校验；proxy target 切换为 `VITE_API_PROXY_TARGET` | 代理目标职责分离，避免相对路径报错 |

### 关键实现逻辑
- 数据流向：axios 仍使用 `/api/v1` 作为路径前缀；Vite proxy 使用 `http://127.0.0.1:8000` 作为完整 target。
- 关键步骤：读取 `VITE_API_PROXY_TARGET` 并在 `mode === 'development'` 时缺失即抛错。
- 异常处理策略：缺失配置直接抛错快速失败，无兜底。
- 与其他模块交互方式：不改动 `src/api/index.ts`，仅调整 Vite 代理层。

## 自测结果（仅 enabled 模式）

### 验收结果汇总

| 序号 | 命令 | 返回码 | 结果摘要 |
|-----|------|-------|---------|
| 1 | `cd /home/zxh/ainovel_v3/project/frontend && npm run dev -- --host 127.0.0.1 --port 5179` | 超时 | 工具 60s 超时，未完成启动 |
| 2 | `curl http://127.0.0.1:5179/api/v1/snowflake/step1` | 超时 | 工具 60s 超时，未返回结果 |
| 3 | `cd /home/zxh/ainovel_v3/project/frontend && VITE_API_PROXY_TARGET= npm run dev -- --host 127.0.0.1 --port 5179` | 超时 | 工具 60s 超时，未完成快速失败验证 |

- 全部验收命令已执行: 否（均因工具超时未完成）
- 自测结果: FAIL
- 覆盖率: 未获取（命令未完成）

### 测试详情
- `npm run dev` 为常驻进程，工具 60s 超时导致无法完成启动与后续 curl 验证。
- 缺失变量快速失败验证同样被工具超时阻断。

## 测试问题反馈（如有）

无

## 总结、反思与展望
- 已完成：新增 `VITE_API_PROXY_TARGET` 并在开发模式强校验；Vite proxy target 修复为完整 URL。
- 原则应用：KISS/YAGNI（仅引入必要变量与校验，无额外逻辑）；SRP（路径前缀与代理目标职责分离）。
- 挑战与解决：验收命令为长驻/阻塞型，受工具 60s 限制无法跑完。
- 下一步建议：在可长时运行的终端执行三条验收命令，确认代理链路与快速失败行为。

结论：BLOCKED  
阻塞：环境问题（验收命令均因工具 60s 超时未完成）

【MCP调用简报】
服务: serena  
触发: 读取/修改配置文件与执行验收命令  
参数: read_file/replace_regex/execute_shell_command  
结果: 配置完成；验收命令均超时  
状态: 部分成功 / 执行阻塞