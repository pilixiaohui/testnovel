已阅读开发行为规范
iteration: 8
self_test: enabled

## 任务理解

工单要求实现的功能：
1. 编写雪花流程 E2E 测试用例，覆盖页面加载、步骤指示器、Step1 输入、步骤流转。
2. 执行验收命令并确保测试通过。

## 实现方案

### 设计思路
- 最小可用测试：只覆盖雪花页面核心流程与关键 UI 选择器，避免冗余场景（KISS/YAGNI）。
- 复用现有端口与启动方式，确保测试自包含可重复运行（DRY/SOLID）。

### 改动说明

| 文件 | 修改内容 | 实现逻辑 |
|-----|---------|---------|
| `project/frontend/tests/e2e/snowflake.spec.ts:1` | 新增雪花流程 E2E 用例与 API mock、dev server 启停 | 覆盖加载、步骤指示器、Step1 输入、Step2 状态更新 |

### 关键实现逻辑
- 数据流向：通过 Playwright 路由拦截 `step1/step2` 接口返回固定数据，驱动 UI 状态更新。
- 关键处理步骤：进入 `/snowflake` → 校验步骤列表 → Step1 输入并提交 → Step2 选择并提交 → 校验步骤状态变化。
- 异常处理策略：无兜底逻辑，失败直接抛出（快速失败）。
- 与其他模块交互方式：通过页面数据标记 `data-test` 定位组件，不依赖内部实现细节。

## 自测结果（仅 enabled 模式）

### 验收结果汇总

| 序号 | 命令 | 返回码 | 结果摘要 |
|-----|------|-------|---------|
| 1 | `ls project/frontend/tests/e2e/snowflake.spec.ts` | 0 | 文件存在 |
| 2 | `cd project/frontend && npx playwright test snowflake.spec.ts --list` | 0 | 列出 1 个测试 |
| 3 | `cd project/frontend && npx playwright test snowflake.spec.ts` | 0 | 1 passed |

- 全部验收命令已执行: 是
- 自测结果: PASS
- 覆盖率: 未生成（验收未输出 coverage）

### 测试详情
- `snowflake.spec.ts` 通过，覆盖页面加载、步骤指示器、Step1 输入、步骤流转。
- 按要求使用 Playwright MCP 进行页面导航与点击验证（手动校验 /snowflake 页面可用）。

## 测试问题反馈（如有）
无

## 总结、反思与展望
- 已完成：新增雪花流程 E2E 测试文件并通过运行，满足 M3‑T2 验收要求。
- 原则应用：最小覆盖核心流程（KISS/YAGNI），测试自包含启动与 mock（DRY/SRP）。
- 挑战与应对：需要 MCP 手动验证，临时启动独立端口服务完成检查后即停止。
- 下一步建议：推进 M3‑T3（simulation.spec.ts）并复用当前测试结构与 mock 模式。

结论：PASS
阻塞：无

【MCP调用简报】
服务: playwright
触发: 按要求使用 Playwright MCP 验证雪花流程页面
参数: browser_navigate http://127.0.0.1:5178/snowflake；browser_snapshot；browser_click snowflake-add-step
结果: 页面加载成功并可交互
状态: 成功