已阅读测试行为规范
iteration: 6
work_mode: design

## 任务执行
- 已读取工单与前端测试脚本，确认现有 unit/integration/coverage 命令与测试分布。
- 新增 E2E 测试计划骨架文件，提供 data-test 选择器清单与关键场景，符合 KISS/YAGNI（不引入额外配置、仅给出最小可执行规划）。
- 未执行任何测试（design 模式）。当前仓库未见 Playwright 配置/依赖验证；真实执行可能阻塞在 Playwright 安装与 testMatch 配置上。
- 替代验证方案：启动前端开发服务器后，使用 Playwright MCP 逐条执行关键路径（基于 data-test 选择器）并截图留证。

Playwright MCP 关键用例（建议覆盖）
- SnowflakeFlow：新增一步 → 列表长度增加 → 新条目可见
- SimulationConsole：启动 → 状态变为 running → 停止 → 状态变为 stopped
- SceneEditor：填写标题 → 保存 → 成功提示出现
- WorldManager：创建世界 → 列表出现新条目
- Settings：修改配置 → 保存 → 成功提示出现

data-test 选择器约定（稳定/可维护）
- 命名统一 kebab-case；页面根节点使用 `{page}-root`
- 列表/表格：`{page}-list`
- 主要动作：`{page}-{action}`（如 `scene-save`）
- 输入/表单：`{page}-{field}-input` 或 `{page}-form`
- 禁止使用动态 id/索引作为选择器

## 关键文件
- `project/frontend/tests/e2e/playwright.e2e.ts:1` - E2E 计划骨架与 data-test 清单（design 模式红灯占位）

## 建议验收标准

### 标准 1: unit
- 命令: `cd /home/zxh/ainovel_v3/project/frontend && npm run test:unit`
- 阈值: 全部通过
- 理由: 验证基础单元行为与现有视图契约

### 标准 2: integration
- 命令: `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- 阈值: 全部通过
- 理由: 验证核心视图最小交互与 data-test 入口一致性

### 标准 3: coverage
- 命令: `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`
- 阈值: Lines/Coverage >= 80%
- 理由: 满足全局覆盖率门槛要求

### 标准 4: e2e
- 命令: `cd /home/zxh/ainovel_v3/project/frontend && npx playwright test`
- 阈值: 全部通过 + 关键用例全覆盖 + 截图可追溯
- 理由: 真实用户路径验证（需 Playwright 配置/安装与 MCP 执行）

coverage: 0%

结论：PASS
阻塞：无

【MCP调用简报】
服务: serena
触发: 工单读取
参数: read_file orchestrator/workspace/test/current_task.md
结果: 获取 design 目标/验收/环境
状态: 成功
服务: serena
触发: 前端测试脚本确认
参数: read_file project/frontend/package.json
结果: 提取 test:unit/test:integration/test:coverage/test:e2e 命令
状态: 成功
服务: serena
触发: 测试目录确认
参数: list_dir project/frontend, list_dir project/frontend/tests
结果: 识别现有测试文件与路径
状态: 成功
服务: serena
触发: 现有测试内容参考
参数: read_file project/frontend/tests/fe_core_views_contract.spec.ts
结果: 已读取
状态: 成功
服务: serena
触发: 现有测试内容参考
参数: read_file project/frontend/tests/fe_core_views_minimal.spec.ts
结果: 已读取
状态: 成功
服务: serena
触发: 设计阶段产出
参数: create_text_file project/frontend/tests/e2e/playwright.e2e.ts
结果: 新增 E2E 计划骨架文件
状态: 成功