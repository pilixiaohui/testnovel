已阅读开发行为规范
iteration: 13
self_test: enabled

## 任务理解

工单要求实现的功能：
1. 解决 E2E 并发端口冲突（串行执行或改端口）
2. 修复 core.e2e.spec.ts mock 路径与当前 `/api/v1/scenes`、`/api/v1/roots` 不一致问题
3. 修复 SceneEditor 断言字段不匹配（title）
4. 按验收标准执行全部 E2E 命令

## 实现方案

### 设计思路
以对齐真实前端 API 路径为核心，直接修复测试 mock 与断言（KISS/YAGNI），并通过 Playwright 配置串行执行消除端口冲突，避免引入额外兼容逻辑。

### 改动说明

| 文件 | 修改内容 | 实现逻辑 |
|-----|---------|---------|
| `project/frontend/playwright.config.ts:3` | 禁用并行、设置单 worker | 串行执行避免多个 devServer 抢占同一端口 |
| `project/frontend/tests/e2e/core.e2e.spec.ts:63` | 更新 mock 路径到 `/api/v1/scenes`、`/api/v1/roots`，补齐 scene.title，收窄 complete 路由并允许 query 匹配 | 让拦截路由与前端请求一致，断言与渲染字段一致，避免路由覆盖与 query 丢失 |

### 关键实现逻辑
- 数据流向：UI 点击触发 axios 请求 → Playwright `page.route` 命中新路径并返回 mock → `waitForRequest/Response` 等待完成 → 断言 UI 渲染。
- 关键处理：`scene` mock 改为 `scenes/**/context|render|diff|complete`，避免泛化路由吞掉 context；`roots/*` 返回 `{ relations: [{ from_entity_id, to_entity_id }] }` 以匹配 `fetchRelations` 映射。
- 匹配策略：为带 query 的请求加 `**` 通配，确保 `branch_id` 不导致匹配失败。
- 并发控制：Playwright `workers: 1` 强制串行，消除 5177 端口冲突。

## 自测结果（仅 enabled 模式）

### 验收结果汇总

| 序号 | 命令 | 返回码 | 结果摘要 |
|-----|------|-------|---------|
| 1 | `cd project/frontend && npx playwright test snowflake.spec.ts` | 0 | 1 passed |
| 2 | `cd project/frontend && npx playwright test simulation.spec.ts` | 0 | 1 passed |
| 3 | `cd project/frontend && npx playwright test core.e2e.spec.ts` | 0 | 5 passed |
| 4 | `cd project/frontend && npm run test:e2e` | 0 | 7 passed |

- 全部验收命令已执行: 是
- 自测结果: PASS

### 测试详情
- Playwright 单测与全量 E2E 均通过；未输出 coverage（项目未配置 Playwright coverage）。

## 测试问题反馈（如有）

无

结论：PASS
阻塞：无

【MCP调用简报】
服务: serena
触发: 读取/定位测试与配置文件并对齐路由、串行配置
参数: read_file/list_dir/think_about_*（max_answer_chars: -1）
结果: 定位并修改 core.e2e.spec.ts 与 playwright.config.ts
状态: 成功