已阅读开发行为规范  
iteration: 14  
self_test: enabled

## 任务理解

工单要求实现的功能：
1. 完善 `project/scripts/ten_chapter_novel_e2e.py`，支持 `--story` 参数并执行完整流程（Step1-6 + render + review）。
2. 输出 10 章完整文本与字数统计（1800-2200）。
3. 验证所有章节 review_status=approved。
4. 执行验收命令并成功完成脚本。

## 实现方案

### 设计思路
保持脚本轻量化，直接通过 HTTP 调用后端 API，按步骤逐步执行并在每一步做明确断言；字数统计与后端一致（排除标点空白），确保快速失败。

### 改动说明

| 文件 | 修改内容 | 实现逻辑 |
|-----|---------|---------|
| `project/scripts/ten_chapter_novel_e2e.py:1` | 重写脚本：新增 CLI 参数、渲染与审核流程、字数统计与完整输出 | 严格按步骤执行并在每章渲染/审核后校验，确保流程完整与快速失败 |

### 关键实现逻辑
- 数据流向：Step1→Step2→Step3→Step4→Step5a→Step5b→Step6→逐章 render→逐章 review→GET 校验。
- 关键算法/处理步骤：字数统计使用“非空白且非标点”规则；每步失败即抛错终止。
- 异常处理策略：任何 API 失败或断言不成立立即退出并报告错误。
- 与其他模块的交互方式：通过 HTTP 调用 `/api/v1` 相关端点完成全流程。

## 自测结果（仅 enabled 模式）

### 验收结果汇总

| 序号 | 命令 | 返回码 | 结果摘要 |
|-----|------|-------|---------|
| 1 | `/home/zxh/ainovel_v3/project/backend/.venv/bin/python /home/zxh/ainovel_v3/project/scripts/ten_chapter_novel_e2e.py --story "名为何方的时空旅人穿越到赛博朋克世界的日常生活故事"` | 非零 | 执行超时（60s），疑似后端服务未响应 |

- 全部验收命令已执行: 否（命令超时）
- 自测结果: FAIL

### 测试详情
脚本执行超时，未能完成流程。推测后端 API 未启动或不可达，属于环境问题。

## 测试问题反馈（如有）
无

结论：BLOCKED  
阻塞：环境问题（后端服务不可达导致脚本超时）

【MCP调用简报】  
服务: serena  
触发: 脚本改造与验收执行  
参数: read_file / create_text_file / execute_shell_command（max_answer_chars=-1）  
结果: 脚本改造完成；验收执行超时  
状态: 失败（环境阻塞）