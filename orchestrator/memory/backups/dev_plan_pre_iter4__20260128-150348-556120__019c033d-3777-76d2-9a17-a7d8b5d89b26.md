# Dev Plan (Snapshot)

> 本文件由 MAIN 维护（可覆盖编辑）。它是"当前计划与进度"的快照；事实证据以 `orchestrator/reports/report_review.md` 与 `orchestrator/memory/project_history.md` 为准。

## 约束（强制）
- 任务总数必须保持在"几十条"以内（少而硬）
- 每个任务块必须包含：`status / acceptance / evidence`
- status 只允许：TODO / DOING / BLOCKED / DONE / VERIFIED
- 可选字段：`verification_status: <PENDING_DEV_VALIDATION|DEV_VALIDATED|TEST_PASSED|VERIFIED|REVIEW_REJECTED>` 用于验证闭环跟踪
- 只有 REVIEW 的证据才能把 DONE -> VERIFIED（evidence 必须引用 Iteration 与验证方式）

---

## Milestone M1: 前端契约对齐与基础设施

### M1-T1: 对齐 types/stores 与 API baseURL
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:unit`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`（coverage ≥ 80%）
- evidence:

### M1-T2: Snowflake Step1-6 全流程接入
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`（coverage ≥ 80%）
- evidence:

## Milestone M2: Simulation / Editor / World 页面接入

### M2-T1: SimulationConsole 接入推演 API 与状态
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:unit`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`（coverage ≥ 80%）
- evidence:

### M2-T2: SceneEditor 接入 scene API 与版本对比
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:unit`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`（coverage ≥ 80%）
- evidence:

### M2-T3: WorldManager 接入 entity/anchor/subplot API 与关系图谱
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:unit`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:integration`
- `cd /home/zxh/ainovel_v3/project/frontend && npm run test:coverage`（coverage ≥ 80%）
- evidence:

## Milestone M3: E2E 与 Playwright

### M3-T1: Playwright E2E 落地与 test:e2e 真实执行
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/frontend && npx playwright test`
- 0 failed（通过率 100%）
- evidence:

## Milestone M4: 后端验证与覆盖率

### M4-T1: 后端单测与覆盖率达标
- status: TODO
- acceptance:
- `cd /home/zxh/ainovel_v3/project/backend && /home/zxh/ainovel_v3/project/backend/.venv/bin/python -m pytest -q -rs`
- `cd /home/zxh/ainovel_v3/project/backend && /home/zxh/ainovel_v3/project/backend/.venv/bin/python -m pytest --cov=app --cov-report=term`（coverage ≥ 80%）
- evidence:

## Milestone M0: 引导与黑板契约

### M0-T1: 建立 dev_plan 状态机
- status: TODO
- acceptance:
- `orchestrator/memory/dev_plan.md` 存在并遵循固定字段
- 每轮更新在 `orchestrator/memory/project_history.md` 留痕（说明改了什么/为什么）
- evidence:

### M0-T2: 审阅代理输出可核实证据
- status: TODO
- acceptance:
- `orchestrator/reports/report_review.md` 包含可复现的命令与关键输出摘要
- 进度核实：逐条对照 dev_plan 的任务给出 PASS/FAIL 与证据
- evidence:
